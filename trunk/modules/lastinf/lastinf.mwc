<?php if (!defined('insite')) die("no access"); $link ="http://forum.muaurum.lv/upload/index.php?/rss/forums/1-forum-muaurum/"; //линк до рсс на форуме$max = 7; // сколько высвечивать$ftype = "ipb";//тип форума phpbb/ipb$nowitime = time();$topitem = @filemtime("_dat/cach/lastinf"); if(!$topitem || ($nowitime-$topitem>1)) // время кеширования{ global $content;	 global $config;	 ob_start(); require "_sysvol/xml.php"; $tt = new Xml(); $text = $tt->start(file_get_contents($link)); if ($ftype=="ipb") {  foreach ($text["rss"]["channel"]["item"] as $id=>$v)//ipb  {  if ($max<=0) break;  $content->set("|link|",$v["link"]);                                         $content->set("|desc|",htmlspecialchars(iconv("UTF-8","Windows-1251",$v["description"])));    $content->set("|title|",htmlspecialchars(iconv("UTF-8","Windows-1251",$v["title"])));         $content->out_content("theme/".$config["theme"]."/them/lastinf.html");  $max--;  }   }else{  foreach ($text["feed"]["entry"] as $id=>$v)  {  if ($max<=0) break;  $content->set("|link|",$v["id"]);                                     $content->set("|desc|",$v["author"]["name"]);                         $content->set("|title|",htmlspecialchars(iconv("UTF-8","Windows-1251",$v["title"])));    $content->out_content("theme/".$config["theme"]."/them/lastinf.html");  $max--;  }  }  $bufer = ob_get_contents(); write_catch("_dat/cach/lastinf",$bufer); ob_end_clean();  $temp = $bufer;}else $temp=file_get_contents("_dat/cach/lastinf");